use crate::model::diagram::Diagram;
use bomboni_wasm::Wasm;
use serde::{Deserialize, Serialize};
use strum::EnumString;
use strum_macros::Display;
use strum_macros::EnumIter;
use ts_rs::TS;
use wasm_bindgen::prelude::wasm_bindgen;

#[derive(TS)]
#[ts(
  export,
  export_to = "../../../apps/keadex-mina/src/models/autogenerated/"
)]
#[derive(
  Serialize, Deserialize, Display, Debug, EnumString, Clone, EnumIter, Hash, Eq, PartialEq, Wasm,
)]
#[wasm(wasm_abi)]
pub enum HookType {
  #[serde(rename = "onDiagramCreated")]
  #[strum(serialize = "onDiagramCreated")]
  OnDiagramCreated,
  #[serde(rename = "onDiagramDeleted")]
  #[strum(serialize = "onDiagramDeleted")]
  OnDiagramDeleted,
  #[serde(rename = "onDiagramSaved")]
  #[strum(serialize = "onDiagramSaved")]
  OnDiagramSaved,
}

#[derive(TS)]
#[ts(
  export,
  export_to = "../../../apps/keadex-mina/src/models/autogenerated/"
)]
#[derive(Serialize, Deserialize, Display, Debug, Clone, Wasm)]
#[wasm(wasm_abi)]
pub enum HookData {
  Diagram(Diagram),
}

#[derive(TS)]
#[ts(
  export,
  export_to = "../../../apps/keadex-mina/src/models/autogenerated/"
)]
#[derive(Serialize, Deserialize, Debug)]
#[wasm_bindgen(getter_with_clone)]
pub struct HookPayload {
  pub hook_type: HookType,
  pub data: Option<HookData>,
}

impl Default for HookPayload {
  fn default() -> Self {
    HookPayload {
      hook_type: HookType::OnDiagramSaved,
      data: None,
    }
  }
}
